<!DOCTYPE html>
<html lang="eng">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>My To-Do List Two
		</title>
	<style>

	</style>
	</head>

	<body>
		<h1>My To-Do List Again</h1>

		<div id="todo-container">
			<form id="todo-form">
					<div class="controls">
						<label for="todo-input">To-Do List</label>
					<button type="load" onclick="loadFromLS()">Load </button>
					<button type="save" onclick="saveToLS()">Save </button>
					<button type="clear" onclick="clearAll()">Clear List </button>

					</div>
				<input type="text" id="todo-input" placeholder="Enter a task..." required> </input>

				<button type="submit">Add </button>
			</form>
			<ul id="todo-list"> </ul>
		</div>

		<script>
			// Creating constants with values equl to thier coreponding values by id
			const form = document.getElementById("todo-form");
			const input = document.getElementById("todo-input");
			const list = document.getElementById("todo-list");

			window.onload = function () {
				loadFromLS();
			};

			function saveToLS() {		// Function to save the list to local storage using JSON stringify
				const tasks = [];
				document.querySelectorAll("#todo-list li span").forEach(span => {
					tasks.push(span.textContent);
				});
				localStorage.setItem("tasks", JSON.stringify(tasks));	// I like to call this "J's Son's Cookies"
			}

			function loadFromLS() {
				list.innerHTML = "";  // Clear the list before loading

				const saved = localStorage.getItem("tasks");
				if (saved) {
					try {
						const tasks = JSON.parse(saved);
						tasks.forEach(task => {
							addTaskToDom(task);
						});
				} catch (error) {
						console.error("Error parsing tasks from localStorage:", error);
					}
				}
			}

			function addTaskToDom(task) {
				const li = document.createElement("li");
				const span = document.createElement("span");
				span.textContent = task;
				li.appendChild(span);

				const deleteBtn = document.createElement("button");
				deleteBtn.textContent = "Delete";
				
				deleteBtn.onclick = () => {
					list.removeChild(li);
					saveToLS();
				};

				li.appendChild(span);
				li.appendChild(deleteBtn);
				list.appendChild(li);
			}

			function clearAll() {
				localStorage.clear();
				list.innerHTML = "";
			}

			form.addEventListener("submit", function (event) {
				event.preventDefault();
				const task = input.value.trim();  // Trims off the extra spaces from the user's input and stores it within the constant "task"
				if (task !== "") {
					addTaskToDom(task);
					input.value = "";  // Setting the input box to ""
					saveToLS();
				}
			});
		</script>
	</body>
</html>